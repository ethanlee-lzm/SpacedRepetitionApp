(()=>{"use strict";class t{constructor(t,e="No date"){this.name=t,this.dueDate=e}setName(t){this.name=t}getName(){return this.name}setDate(t){this.dueDate=t}getDate(){return this.dueDate}}class e{constructor(t){this.name=t,this.tasks=[]}setName(t){this.name=t}getName(){return this.name}addTask(t){this.tasks.indexOf(t)>0||this.tasks.push(t)}deleteTask(t){const e=this.tasks.find((e=>e.name===t));this.tasks.splice(this.tasks.indexOf(e),1)}getTask(e){return Object.assign(new t,this.tasks.find((t=>t.name=e)))}getTasks(){return this.tasks}contains(t){return this.tasks.some((e=>e.name===t))}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This week"))}addProject(t){this.projects.indexOf(t)>0||this.projects.push(t)}deleteProject(t){const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)}getProject(t){return Object.assign(new e,this.projects.find((e=>e.name===t)))}getProjects(){return this.projects}contains(t){return this.projects.some((e=>e.name===t))}}class n{static saveTodoList(t){localStorage.setItem("todoList",JSON.stringify(t))}static getTodoList(){return Object.assign(new s,JSON.parse(localStorage.getItem("todoList")))}static addProject(t){let e=new s;null!==n.getTodoList()&&(e=Object.assign(new s,n.getTodoList())),e.addProject(t),n.saveTodoList(e)}static deleteProject(t){const e=Object.assign(new s,n.getTodoList());e.deleteProject(t),n.saveTodoList(e)}static addTask(t,e){const a=Object.assign(new s,n.getTodoList());a.getProject(t).addTask(e),n.saveTodoList(a)}static deleteTask(t,e){const a=Object.assign(new s,n.getTodoList());a.getProject(t).deleteTask(e),n.saveTodoList(a)}}class a{static loadHomepage(){a.loadProjects(),a.loadProjectContent("Inbox")}static loadProjects(){n.getTodoList().getProjects().forEach((t=>{"Inbox"!==t.name&&"Today"!==t.name&&"This week"!==t.name&&a.createProject(t.name)})),a.initAddProjectButtons()}static loadTasks(t){n.getTodoList().getProject(t).getTasks().forEach((t=>a.createTask(t.name,t.dueDate))),a.initAddTaskButtons()}static loadProjectContent(t){document.getElementById("project-preview").innerHTML=`\n      <h1 id="project-name">${t}</h1>\n        <div class="tasks-list" id="tasks-list"></div>\n        <button class="button-add-task" id="button-add-task">\n          <i class="fas fa-plus"></i>\n          Add Task\n        </button>\n        <div class="add-task-popup" id="add-task-popup">\n          <input\n            class="input-add-task-popup"\n            id="input-add-task-popup"\n            type="text"\n          />\n          <div class="add-task-popup-buttons">\n            <button class="button-add-task-popup" id="button-add-task-popup">\n              Add\n            </button>\n            <button\n              class="button-cancel-task-popup"\n              id="button-cancel-task-popup"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>`,a.loadTasks(t)}static createProject(t){document.getElementById("projects-list").innerHTML+=` \n      <button class="button-project" data-project-button>\n        <div class="left-project-panel">\n          <i class="fas fa-tasks"></i>\n          <span>${t}</span>\n        </div>\n        <div class="right-project-panel">\n          <i class="fas fa-times"></i>\n        </div>\n      </button>`,a.initProjectButtons()}static createTask(t,e){document.getElementById("tasks-list").innerHTML+=`\n      <button class="button-task" data-task-button>\n        <div class="left-task-panel">\n          <i class="far fa-circle"></i>\n          <p class="task-content">${t}</p>\n          <input type="text" class="input-task-name" data-input-task-name>\n        </div>\n        <div class="right-task-panel">\n          <p class="due-date" id="due-date">${e}</p>\n          <input type="date" class="input-due-date" data-input-due-date>\n          <i class="fas fa-times"></i>\n        </div>\n      </button>`,a.initTaskButtons()}static clear(){a.clearProjectPreview(),a.clearProjects(),a.clearTasks()}static clearProjectPreview(){document.getElementById("project-preview").textContent=""}static clearProjects(){document.getElementById("projects-list").textContent=""}static clearTasks(){document.getElementById("tasks-list").textContent=""}static initAddProjectButtons(){const t=document.getElementById("button-add-project"),e=document.getElementById("button-add-project-popup"),s=document.getElementById("button-cancel-project-popup");t.addEventListener("click",a.openAddProjectPopup),e.addEventListener("click",a.addProject),s.addEventListener("click",a.closeAddProjectPopup)}static openAddProjectPopup(){const t=document.getElementById("add-project-popup"),e=document.getElementById("button-add-project");t.classList.add("active"),e.classList.add("active")}static closeAddProjectPopup(){const t=document.getElementById("add-project-popup"),e=document.getElementById("button-add-project"),s=document.getElementById("input-add-project-popup");t.classList.remove("active"),e.classList.remove("active"),s.value=""}static addProject(){const t=document.getElementById("input-add-project-popup").value;""===t||n.getTodoList().contains(t)||(n.addProject(new e(t)),a.createProject(t)),a.closeAddProjectPopup()}static initProjectButtons(){const t=document.getElementById("button-inbox-projects"),e=document.getElementById("button-today-projects"),s=document.getElementById("button-week-projects"),n=document.querySelectorAll("[data-project-button]");t.addEventListener("click",a.openInboxTasks),e.addEventListener("click",a.openTodayTasks),s.addEventListener("click",a.openWeekTasks),n.forEach((t=>t.addEventListener("click",a.handleProjectButton)))}static openInboxTasks(){a.openProject("Inbox",this)}static openTodayTasks(){a.openProject("Today",this)}static openWeekTasks(){a.openProject("This week",this)}static handleProjectButton(t){const e=this.children[0].children[1].textContent;t.target.classList.contains("fa-times")?a.deleteProject(e):a.openProject(e,this)}static openProject(t,e){[...document.querySelectorAll(".button-default-project"),...document.querySelectorAll(".button-project")].forEach((t=>t.classList.remove("active"))),e.classList.add("active"),a.loadProjectContent(t)}static deleteProject(t){t===document.getElementById("project-name").textContent&&a.clearProjectPreview(),n.deleteProject(t),a.clearProjects(),a.loadProjects()}static initAddTaskButtons(){const t=document.getElementById("button-add-task"),e=document.getElementById("button-add-task-popup"),s=document.getElementById("button-cancel-task-popup");t.addEventListener("click",a.openAddTaskPopup),e.addEventListener("click",a.addTask),s.addEventListener("click",a.closeAddTaskPopup)}static openAddTaskPopup(){const t=document.getElementById("add-task-popup"),e=document.getElementById("button-add-task");t.classList.add("active"),e.classList.add("active")}static closeAddTaskPopup(){const t=document.getElementById("add-task-popup"),e=document.getElementById("button-add-task"),s=document.getElementById("input-add-task-popup");t.classList.remove("active"),e.classList.remove("active"),s.value=""}static addTask(){const e=document.getElementById("project-name").textContent,s=document.getElementById("input-add-task-popup").value;""===s||n.getTodoList().getProject(e).contains(s)||(n.addTask(e,new t(s)),a.createTask(s,"No date")),a.closeAddTaskPopup()}static initTaskButtons(){const t=document.querySelectorAll("[data-task-button]"),e=document.querySelectorAll("[data-input-task-name"),s=document.querySelectorAll("[data-input-due-date");t.forEach((t=>t.addEventListener("click",a.handleTaskButton))),e.forEach((t=>t.addEventListener("keypress",a.renameTask))),s.forEach((t=>t.addEventListener("change",a.setTaskDate)))}static handleTaskButton(t){t.target.classList.contains("fa-circle")?a.setTaskCompleted(this):t.target.classList.contains("fa-times")?a.deleteTask(this):t.target.classList.contains("task-content")?a.openRenameInput(this):t.target.classList.contains("due-date")&&a.openSetDateInput(this)}static setTaskCompleted(t){const e=document.getElementById("project-name").textContent,s=t.children[0].children[1].textContent;n.deleteTask(e,s),a.clearTasks(),a.loadTasks(e)}static deleteTask(t){const e=document.getElementById("project-name").textContent,s=t.children[0].children[1].textContent;n.deleteTask(e,s),a.clearTasks(),a.loadTasks(e)}static openRenameInput(t){const e=t.children[0].children[1],s=t.children[0].children[2];e.classList.add("active"),s.classList.add("active")}static closeRenameInput(t){const e=t.children[0].children[1],s=t.children[0].children[2];e.classList.remove("active"),s.classList.remove("active"),s.value=""}static renameTask(t){if("Enter"!==t.key)return;const e=document.getElementById("project-name").textContent,s=this.previousElementSibling.textContent,o=this.value;if(""===o||n.getTodoList().getProject(e).contains(o))return this.value="",void a.closeRenameInput(this.parentNode.parentNode);n.renameTask(e,s,o),a.clearTasks(),a.loadTasks(e),a.closeRenameInput(this.parentNode.parentNode)}static openSetDateInput(t){const e=t.children[1].children[0],s=t.children[1].children[1];e.classList.add("active"),s.classList.add("active")}static closeSetDateInput(t){const e=t.children[1].children[0],s=t.children[1].children[1];e.classList.remove("active"),s.classList.remove("active")}static setTaskDate(){const t=this.parentNode.parentNode,e=document.getElementById("project-name").textContent,s=t.children[0].children[1].textContent,o=this.value;n.setTaskDate(e,s,o),a.clearTasks(),a.loadTasks(e),a.closeSetDateInput(t)}}document.addEventListener("DOMContentLoaded",a.loadHomepage())})();